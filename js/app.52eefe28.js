(function(){"use strict";var e={5522:function(e,t,r){var n=r(2856),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrap",attrs:{id:"app"}},[t("h4",[e._v("体温和用药记录工具 ")]),t("div",{staticClass:"sider"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.addRecord.apply(null,arguments)}}},[t("label",[e._v("时间：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newRecord.time,expression:"newRecord.time"}],attrs:{type:"datetime-local",required:"",placeholder:"记录时间"},domProps:{value:e.newRecord.time},on:{input:function(t){t.target.composing||e.$set(e.newRecord,"time",t.target.value)}}}),t("label",[e._v("体温 (℃)：")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.newRecord.temperature,expression:"newRecord.temperature",modifiers:{number:!0}}],attrs:{type:"number",step:"0.1",placeholder:"体温 (支持一位小数)"},domProps:{value:e.newRecord.temperature},on:{input:function(t){t.target.composing||e.$set(e.newRecord,"temperature",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),t("label",[e._v("药名 (可选)：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newRecord.medicine,expression:"newRecord.medicine"}],attrs:{type:"text",placeholder:"药名"},domProps:{value:e.newRecord.medicine},on:{input:function(t){t.target.composing||e.$set(e.newRecord,"medicine",t.target.value)}}}),t("label",[e._v("剂量 (可选)：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newRecord.dose,expression:"newRecord.dose"}],attrs:{type:"text",placeholder:"剂量"},domProps:{value:e.newRecord.dose},on:{input:function(t){t.target.composing||e.$set(e.newRecord,"dose",t.target.value)}}}),t("div",{staticClass:"btn-box"},[t("button",{attrs:{type:"submit"}},[e._v(e._s(null===e.editingIndex?"保存":`更新到${e.editingIndex+1}`))]),t("span",{staticClass:"btn",on:{click:e.clear}},[e._v("清空所有记录")])])]),t("div",{staticClass:"temp-recored"},[t("ul",[e._l(e.tempRecords,(function(r,n){return[t("li",{key:n,ref:n===e.tempRecords.length-1?"latestRecord":"",refInFor:!0,class:{highlight:e.editingIndex===n,waring:r.temperature>37.5,active:e.active==n},on:{click:function(t){e.active=n}}},[t("span",{staticClass:"order"},[e._v(e._s(n+1)+" ")]),t("span",[t("small",[e._v(e._s(e._f("datePipe")(r.time)))])]),t("span",{staticClass:"temperature"},[t("big",[e._v(e._s(r.temperature))]),e._v("℃")],1),r.medicine?t("span",[e._v(" "+e._s(r.medicine)+e._s(r.dose))]):e._e(),t("div",{staticClass:"actions"},[t("button",{on:{click:function(t){return e.editRecord(n)}}},[e._v("编辑")]),t("button",{on:{click:function(t){return e.deleteRecord(n)}}},[e._v("删除")])])])]}))],2)]),t("div",{staticClass:"total"},[t("p",[e._v("本次病程用药"+e._s(e.medicineCount)+"次")]),t("p",[e._v(" 高温持续时长 "),t("small",[e._v("（初次记录至最后一次37.5以上）")]),t("br"),e._v(" "+e._s(e.feverDuration)+" ")])])]),t("div",{ref:"chart",staticStyle:{width:"100%",height:"600px","margin-top":"20px"}})])},o=[],s=(r(4114),r(2265));const a=[];function c(e,t="yyyy-MM-dd hh:mm:ss"){const r=new Date(e);var n={"y+":r.getFullYear(),"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t.indexOf("aN")>=0||!e?null:t}var d={data(){return{tempRecords:a,newRecord:{time:"",temperature:null,medicine:"",dose:""},editingIndex:null,medicineCount:0,feverDuration:"",active:null}},methods:{sortRecordsByTime(){this.tempRecords.sort(((e,t)=>new Date(e.time)-new Date(t.time)))},addRecord(){this.newRecord.temperature||this.newRecord.medicine?(null!==this.editingIndex?(this.tempRecords[this.editingIndex]={...this.newRecord},this.editingIndex=null):this.tempRecords.push({...this.newRecord}),this.saveRecordsToLocalStorage(),this.sortRecordsByTime(),this.renderChart(),this.$nextTick((()=>{const e=this.$refs.latestRecord;e&&e.length>0&&e[0].scrollIntoView({behavior:"smooth"})})),this.newRecord={time:"",temperature:null,medicine:"",dose:""},this.calculateStats(),this.active=null):alert("请输入体温或用药名称")},editRecord(e){this.newRecord={...this.tempRecords[e]},this.editingIndex=e},deleteRecord(e){this.tempRecords.splice(e,1),this.saveRecordsToLocalStorage(),this.renderChart()},saveRecordsToLocalStorage(){localStorage.setItem("tempRecords",JSON.stringify(this.tempRecords))},loadRecordsFromLocalStorage(){const e=localStorage.getItem("tempRecords");e&&(this.tempRecords=JSON.parse(e))},clear(){this.tempRecords={},localStorage.setItem("tempRecords",{})},renderChart(){const e=s.Ts(this.$refs.chart),t={title:{text:"体温和用药记录",show:!1},tooltip:{trigger:"axis"},grid:{show:!0},xAxis:{type:"time",splitLine:{show:!0},gridIndex:0,axisLabel:{formatter:function(e){const t=new Date(e);return`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()}\n${t.getHours()}:${("0"+t.getMinutes()).slice(-2)}`}}},yAxis:{type:"value",min:35,max:41,interval:.5,gridIndex:0},series:[{name:"体温",data:this.tempRecords.map((e=>({value:[e.time,e.temperature],lineStyle:{color:e.temperature>38?"red":"#42b983"}}))),type:"line",smooth:!0,markPoint:{data:this.tempRecords.filter((e=>e.medicine)).map((e=>({name:"用药",value:`${e.temperature||""}\n${e.medicine||""}${e.dose||""}`,xAxis:e.time,yAxis:e.temperature})))},lineStyle:{color:"#42b983",width:2}}]};e.setOption(t)},calculateStats(){this.medicineCount=this.tempRecords.filter((e=>e.medicine)).length;const e=new Date(this.tempRecords[0].time),t=this.tempRecords.slice().reverse().find((e=>e.temperature>37.5));if(t){const r=new Date(t.time),n=r-e,i=Math.floor(n/36e5),o=Math.floor(n%36e5/6e4);this.feverDuration=`${i}小时${o}分钟`}else this.feverDuration="无高温记录"}},mounted(){this.loadRecordsFromLocalStorage(),this.sortRecordsByTime(),this.renderChart(),this.calculateStats()},filters:{datePipe:c}},l=d,u=r(1656),m=(0,u.A)(l,i,o,!1,null,null,null),p=m.exports;n.Ay.config.productionTip=!1,new n.Ay({render:e=>e(p)}).$mount("#app")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,n,i,o){if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],i=e[l][1],o=e[l][2];for(var a=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(l--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,s=n[0],a=n[1],c=n[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(c)var l=c(r)}for(t&&t(n);d<s.length;d++)o=s[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=self["webpackChunktemp_recored"]=self["webpackChunktemp_recored"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(5522)}));n=r.O(n)})();
//# sourceMappingURL=app.52eefe28.js.map